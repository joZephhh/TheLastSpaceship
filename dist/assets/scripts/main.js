function resize(){canvas.width=window.innerWidth,canvas.height=window.innerHeight}function init(){for(var t=0;t<400;t++){var a={};a.x=Math.floor(Math.random()*canvas.width),a.y=Math.floor(Math.random()*canvas.width),a.velocity={},a.velocity.x=(4*Math.random()-2)/10,a.velocity.y=(4*Math.random()-2)/10,a.style="white",a.radius=2*Math.random(),particles.push(a)}loop()}function update_particles(){for(var t=0;t<particles.length;t++){var a=particles[t];a.x+=a.velocity.x,a.y+=tls.data.speed,(a.x>canvas.width||a.x<0||a.y>canvas.height||a.y<0)&&(particles.splice(t,1),t--)}}function add_particle(){var t={};t.x=Math.floor(Math.random()*canvas.width),t.y=0,t.velocity={},t.velocity.x=(4*Math.random()-2)/10,t.velocity.y=(4*Math.random()-2)/10,t.style="white",t.radius=2*Math.random(),particles.push(t)}function draw(){context.clearRect(0,0,canvas.width,canvas.height);for(var t=0;t<particles.length;t++){var a=particles[t];context.beginPath(),context.arc(a.x,a.y,a.radius,0,2*Math.PI),context.fillStyle=a.style,context.fill()}}function loop(){window.requestAnimationFrame(loop),add_particle(),update_particles(),draw()}function restore(){var t=new Date,a=parseFloat(localStorage.getItem("tls_date")),e=Math.round((t.getTime()-a)/1e3);tls.data.distance-e>0?tls.data.distance-=e:tls.data.distance=0,console.log(e,tls.data.distance)}function add_distance(){tls.data.distance+=1*tls.data.multi_distance,tls.el.dataSpeed.innerText=tls.data.distance,tls.el.dataTotal.innerText=tls.data.distanceTotal}function remove_distance(){tls.data.distance>0&&(tls.data.distance-=1,tls.el.dataSpeed.innerText=tls.data.distance)}function rebootStationary(){clearInterval(stationary),clearTimeout(timeoutStandby),timeoutStandby=setTimeout(function(){stationary=setInterval(function(){remove_distance()},1e3)},3e3)}function money(){tls.el.dataMoney.innerText=tls.data.money}function checkData(){tls.data.multi_distance=1+Math.floor(tls.data.distance/75),tls.data.speed<=40?tls.data.speed=1+Math.floor(tls.data.distance/5/20):tls.data.speed=40,tls.data.money=Math.floor(tls.data.distanceTotal/1e3),money(),localStorage.setItem("tls_distance_total",tls.data.distanceTotal),localStorage.setItem("tls_distance",tls.data.distance);var t=new Date;localStorage.setItem("tls_date",t.getTime())}function loop_data(){window.requestAnimationFrame(loop_data),checkData()}console.log("script linked");var tls={};tls.el={},tls.el.container=document.querySelector(".container-game"),tls.el.launch_page=tls.el.container.querySelector(".landing-page"),tls.el.game=tls.el.container.querySelector(".game"),tls.el.colorInput=tls.el.container.querySelector(".colorSpaceship"),tls.el.spaceship=tls.el.game.querySelector(".game-spaceship svg"),tls.el.svgPersoParts=tls.el.spaceship.querySelectorAll(".spaceship-personalisation"),tls.el.dataTotal=tls.el.game.querySelector(".game-total-data span"),tls.el.dataSpeed=tls.el.game.querySelector(".game-data-speed .game-data-info span"),tls.el.dataMoney=tls.el.game.querySelector(".game-data-money .game-data-info span"),tls.data={},localStorage.getItem("tls_distance")?tls.data.distance=parseFloat(localStorage.getItem("tls_distance")):tls.data.distance=0,localStorage.getItem("tls_distance_total")?tls.data.distanceTotal=parseFloat(localStorage.getItem("tls_distance_total")):tls.data.distanceTotal=0,tls.data.multi_distance=1,tls.data.speed=1,tls.data.money=0,tls.el.start_btn=tls.el.launch_page.querySelector(".ld-start");var canvas=document.querySelector("canvas"),context=canvas.getContext("2d");window.addEventListener("resize",resize),resize();var particles=[];init(),tls.el.start_btn.addEventListener("click",function(t){restore(),loop_data(),t.preventDefault(),tls.el.launch_page.classList.add("launch"),tls.el.dataSpeed.innerText=tls.data.distance,setTimeout(function(){tls.el.launch_page.remove(),tls.el.game.classList.add("launched")},800),setTimeout(function(){rebootStationary()},5e3)}),tls.el.colorInput.addEventListener("blur",function(){for(var t=0;t<tls.el.svgPersoParts.length;t++)tls.el.svgPersoParts[t].style="fill:"+tls.el.colorInput.value}),tls.el.spaceship.addEventListener("click",function(){rebootStationary(),add_distance(),console.log("spaceship clicked")}),setInterval(function(){tls.data.distanceTotal+=1*tls.data.distance,tls.el.dataTotal.innerText=tls.data.distanceTotal},1e3);var stationary,timeoutStandby;